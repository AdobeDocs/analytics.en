---
description: The Genesis integration for DFA leverages the DFA Floodlight Configuration ID (dfa_SPOTID), which improves report consistency between DFA and Adobe data collection system.
keywords: DFA
seo-description: The Genesis integration for DFA leverages the DFA Floodlight Configuration ID (dfa_SPOTID), which improves report consistency between DFA and Adobe data collection system.
seo-title: Update Your Web Site's Data Collection Code
solution: Analytics
title: Update Your Web Site's Data Collection Code
topic: Data connectors
uuid: a97d1b62-f883-48b1-9516-4f889e701901
index: y
internal: n
snippet: y
---

# Update Your Web Site's Data Collection Code{#update-your-web-site-s-data-collection-code}

The Genesis integration for DFA leverages the DFA Floodlight Configuration ID (dfa_SPOTID), which improves report consistency between DFA and Adobe data collection system.

>[!NOTE]
>
>The term Spotlight was changed to Floodlight in a recent release of Google DFA. The JavaScript parameter `dfa_SPOTID` was named based on the Spotlight terminology but is used for both versions.

To enable the DFA integration on your Web site, you must update your JavaScript data collection code by adding the following:

* Integrate Module for DFA 
* Addition to your Collection Code

## Integrate Module for DFA {#section-fa00e42a732a4e27a4ab3dfcfeae1a5b}

The DFA integration leverages the Adobe Marketing Cloud Integrate Module, which adds functionality to your core JavaScript data collection code ( `s_code.js`). The Integrate Module comes as part of the .zip file when you download the AppMeasurement for Javascript code from the [Code Manager](https://marketing.adobe.com/resources/help/en_US/reference/code_manager_admin.html). Contact your Adobe Consultant only if you need additional help finding it.

Insert the Integrate Module code in the `Modules` section of your website's `s_code.js` file.

## Addition to Your Collection Code {#section-8f98c727f1ba414fb8b4f02d696b8791}

Based on your selections when activating the DFA integration in the Integration Wizard, Data Connectors generates and emails you a customized addition to your JavaScript data collection code. Insert this code in the main section of the `s_code.js` file (not in the `doPlugins` function or any other function).

The sample code shown below is for illustration only; use the code that was emailed to you after you completed the Data Connectors Integration Wizard.

The collection code consists of the following components:

* DFA Integrate Settings 
* Integration-Required Plug-ins

**DFA Integrate Settings**

```
/************************** DFA VARIABLES **************************/ 
var dfaConfig = { 
   CSID:              "1234567", 
   SPOTID:            "29876543", 
   tEvar:             "eVar17", 
   errorEvar:         "eVar59", 
   timeoutEvent:      "event76", 
   requestURL:         "http://fls.doubleclick.net/ 
json?spot=[SPOTID]&src=[CSID]&var=[VAR]&host=integrate.112.2o7.net%2 
Fdfa_echo%3Fvar%3D[VAR]%26AQE%3D1%26A2S%3D1&ord=[RAND]", 
 
   maxDelay:          "1500", 
   visitCookie:       "s_dfa", 
   clickThroughParam: "CID", 
   searchCenterParam: "s_kwcid", 
   newRsidsProp:      undefined 
}; 
/************************ END DFA Variables ************************/ 
```

The DFA Integrate Settings Block sets variables required by the DFA integration. The values for each of these variables come from the following sources:

**CSID**: Client Side ID. Generated by DFA once you complete the Integration Wizard. Data Connectors pre-populates this variable with your DFA CS ID, and also sends you this value in the setup email after you complete the Integration Wizard. This variable is not required if Advanced Ad Serving is enabled on your account.

**SPOTID**: Floodlight Configuration (previously called Spotlight ID). Data Connectors pre-populates this variable with your DFA Floodlight Configuration ID, based on the DFA account information you specified in the Integration Wizard.

**tEvar**: Transfer Variable. Data Connectors pre-populates this variable with the Analytics variable name you specified for the View-Through variable in the Integration Wizard. Do not change this value without careful coordination with Adobe Engineering or Engineering Services.

**errorEvar**: Error Variable. Data Connectors pre-populates this variable with the Analytics variable name you specified for DFA Query Failure variable in the Integration Wizard.

**timeoutEvent**: Timeout Event. Data Connectors pre-populates this variable with the Analytics variable name you specified for the Timeout Event variable in the Integration Wizard.

**requestURL**: The remote DFA host to query for ad information. Do not change this value unless so instructed by Adobe.

**maxDelay**: Specifies the amount of time the JavaScript data collection code waits for a response from the DFA Floodlight server, in milliseconds. Adobe recommends experimenting with this value to find the optimum value based on your siteâ€™s traffic. For example, increasing this value generally collects more DFA data, but increases the risk of losing the base visitor data if the visitor leaves the site during the delay period. Reducing this value lowers the risk of losing hit data, but can reduce the amount of DFA data sent with the Adobe hit data.

**visitCookie**: The name of the cookie used to restrict DFA calls to once per visit.

**clickThroughParam**: A query string, typically included on all ads, that notifies the Integrate module that a click has just occurred. The presence of this parameter in the query string causes the request to happen to DFA Floodlight servers no matter if the visitor had already been queried in the last 30 minutes.

**newRsidsProp**: (Optional) Mapped to an unused Traffic property variable. The DFA integration collects and stores this value in the visit cookie to identify the report suites that collected data for a particular visitor. This property is only needed with custom implementations with Adobe Engineering services.

**Integration-Required Plug-Ins**

The Collection Code addition incorporates additional plug-ins that improve the operation of the DFA integration:

* Limits DFA queries to once per visit 
* Provides cookie name flexibility. Although most organizations use s_dfa, you can use any valid cookie name for the DFA integration. 
* Eliminates unnecessary redirects. Because view-through data is collected in real-time, Adobe collection servers and DFA could potentially exchange data on every page view. The plug-in blocks these data exchanges when the information is not necessary.

>[!CAUTION]
>
>One of the mechanisms the plug-in uses to eliminate unnecessary DFA queries is a domain-based visit cookie. An integration report suite that spans multiple domains inflates click-through and view-through data when visitors cross domains after a DFA-influenced view-through or click-through.

